<section>
    <mat-icon (click)="fermer.emit(false)">close</mat-icon>
    <header>
        <!-- Afficher une image -->
        <p *ngIf="notice.metadonnees['media'].type.indexOf('image') > -1">
            <img [src]="notice.metadonnees['media'].url">
        </p>
        <!-- Afficher une vidéo MP4 -->
        <p *ngIf="notice.metadonnees['media'].type.indexOf('mpg4') > -1">
            <video controls>
                <source [src]="notice.metadonnees['media'].url" type="video/mp4">
            </video>
        </p>
        <!-- Afficher une vidéo WEBM -->
        <p *ngIf="notice.metadonnees['media'].type.indexOf('webm') > -1">
            <video controls>
                <source [src]="notice.metadonnees['media'].url" type="video/webm">
            </video>
        </p>
        <!-- Afficher un audio MP3 -->
        <p *ngIf="notice.metadonnees['media'].type.indexOf('mp3') > -1">
            <audio controls>
                <source [src]="notice.metadonnees['media'].url" type="audio/mpeg">
            </audio>
        </p>
    </header>
    <article *ngIf="!update">
        <h3>{{ notice.metadonnees['dublincore'].titre }}</h3>
        <ul>
            <!-- tri dans le premier niveau de données -->
            <li *ngFor="let n of notice | keyvalue">

                <span *ngIf="utils.typeOf(n.value) !== 'object'; else elseBlockN">
                    <strong>{{ n.key }}</strong> : {{ n.value }}
                    <!-- <strong>{{ n.key }} </strong> : <input [(ngModel)]="n.value" [name]="n.key" [disabled]="active === 1 ? false : true"> -->
                </span>
                <ng-template #elseBlockN>
                    <strong>{{ n.key }}</strong>
                    <ul>
                        <!-- Tri dans le deuxième niveau de données -->
                        <li *ngFor="let m of n.value | keyvalue">
                            <span *ngIf="utils.typeOf(m.value) !== 'object'; else elseObjM">
                                <strong>{{ m.key }}</strong> : {{ m.value }}
                            </span>
                            <ng-template #elseObjM>
                                <strong>{{ m.key }}</strong>
                                <ul>
                                    <!-- Tri dans le deuxième niveau de données -->
                                    <li *ngFor="let l of m.value | keyvalue">
                                        <span *ngIf="utils.typeOf(l.value) !== 'object'; else elseBlockL">
                                            <strong>{{ l.key }}</strong> : {{ l.value }}
                                        </span>
                                        <ng-template #elseBlockL>
                                            <strong>{{ l.key }}</strong>
                                            <ul>
                                                <!-- Tri dans le troisième niveau de données -->
                                                <li *ngFor="let k of l.value | keyvalue">
                                                    <strong>{{ k.key }}</strong> : {{ k.value }}
                                                </li>
                                            </ul>
                                        </ng-template>
                                    </li>
                                </ul>
                            </ng-template>
                        </li>
                    </ul>
                </ng-template>
            </li>
        </ul>
    </article>
</section>