"use strict";(self.webpackChunkfonds_gp_admincloud=self.webpackChunkfonds_gp_admincloud||[]).push([[97],{1097:(P,O,r)=>{r.r(O),r.d(O,{IntranetModule:()=>ut});var p=r(4755),a=r(9401),m=r(3478),f=r(9155),e=r(2223);class _{}class u{constructor(){this.idcollections="",this.title="",this.alias="",this.setname="",this.description="",this.typecollection="images",this.creator="",this.language=new Set,this.notices=new Set,this.series=new Set}}var g=r(3144);let v=(()=>{class n{constructor(t){this.http=t}addCollection(t){return this.http.post(this.api+"/collections/edit",t)}updateCollection(t){return this.http.put(this.api+"/collections/edit",t)}deleteCollection(t){this.http.delete(this.api+"/collections/edit",{body:{id:t}}).subscribe({next:o=>{console.log("Next",o)},error:o=>console.error(o),complete:()=>console.info("complete")})}addNotice(t){this.http.put(this.api+"/notices/edit",t).subscribe({next:i=>{console.log("Next",i)},error:i=>console.error(i),complete:()=>console.info("complete")})}addListeNotices(t){return this.http.put(this.api+"/notices/edit",t)}postNotice(t){this.http.post(this.api+"/notices/edit",t).subscribe({next:i=>{console.log("Next",i)},error:i=>console.error(i),complete:()=>console.info("complete")})}deleteNotice(t){this.http.delete(this.api+"/notices/edit",{body:{id:t}}).subscribe({next:o=>{console.log("Next",o)},error:o=>console.error(o),complete:()=>console.info("complete")})}deleteListeNotices(t){return this.http.delete(this.api+"/notices/edit",{body:t})}static#e=this.\u0275fac=function(i){return new(i||n)(e.LFG(g.eN))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),d=(()=>{class n{constructor(t,i){this.http=t,this.set=i,this.config={s3:"",schemas:{}},this.prefixs=[],this.collections=[],this.collection=new u,this.notices=[],this.notice={},this.scannedFolders=[],this.load=!1,this.fakeId="",this.getCloudConfig()}init(){this.collection=new u,this.notices=[],this.notice={},this.scannedFolders=[],this.scannedData=[]}getCloudConfig(){this.http.get("assets/serveur/params.json").subscribe(t=>{this.api=t.API,this.set.api=this.api,this.http.get(this.api+"/config").subscribe(i=>{i.forEach(o=>{console.log(o,o.idconfigurations),"s3"==o.idconfigurations?this.config.s3=o.url:this.config.schemas=o});for(let o in this.config.schemas)console.log(this.config.schemas[o],typeof this.config.schemas[o]),"string"!=typeof this.config.schemas[o]&&this.prefixs.push(this.config.schemas[o]);console.log(this.prefixs),console.log(this.config)}),this.getCollections()})}getCollections(){this.http.get(this.api+"/collections").subscribe({next:t=>{this.collections=t},error:t=>console.log(t),complete:()=>console.log("Collections charg\xe9es")})}getNoticesByCollec(t){this.http.post(this.api+"/notices",t).subscribe({next:i=>{this.notices=i},error:i=>console.log(i),complete:()=>console.log("Notices de la collection charg\xe9es")})}getFolders(){this.load=!0,this.http.get(this.api+"/xmp").subscribe({next:t=>{this.scannedFolders=t},error:t=>{console.error(t),this.load=!1},complete:()=>this.load=!1})}scanFolder(t){this.load=!0,this.http.post(this.api+"/xmp",t).subscribe({next:i=>{this.scannedCollection=new u,this.setScannedData(t,i)},error:i=>{console.error(i),this.load=!1},complete:()=>this.load=!1})}setScannedData(t,i){this.scannedData=[],this.fakeId=(Math.random()+1).toString(36).substring(7)+"_"+t.replace(/\s/g,"-").toLowerCase()+"_",i.forEach(o=>{o.oai_media.size>0&&this.scannedData.push(this.setNotice(t,o))})}setNotice(t,i){let o={};return Object.keys(i).length>0&&(o.dc=i.oai_dc,o.prefix=["oai_dc"],i.oai_nema&&(o.nema=i.oai_nema,o.prefix.push("oai_nema")),i.oai_media&&(o.media=i.oai_media),o.idnotices=this.setIdNotices(t,o),this.setScannedCollection(o)),o}setIdNotices(t,i){let o=this.fakeId;return i.nema&&i.nema.id&&(o+=i.media.file.toLowerCase()),o}setScannedCollection(t){if(t.nema.series){let i=[];-1!=t.nema.series.indexOf(",")?i=t.nema.series.split(","):-1!=t.nema.series.indexOf(";")?i=t.nema.series.split(";"):i.push(t.nema.series),i.forEach(o=>this.scannedCollection.series.add(o.trim()))}this.scannedCollection.notices.add(t.idnotices),0==this.scannedCollection.title.length&&t.nema.collection_name&&(this.scannedCollection.title=t.nema.collection_name),0==this.scannedCollection.alias.length&&t.nema.set_name&&(this.scannedCollection.alias=t.nema.set_name.toLowerCase().replace(" ","-")),0==this.scannedCollection.setname.length&&t.nema.set_name&&(this.scannedCollection.setname=t.nema.set_name),0==this.scannedCollection.creator.length&&t.nema.collection_manager&&(this.scannedCollection.creator=t.nema.collection_manager),this.scannedCollection.timecode||(this.scannedCollection.timecode=Date.now()),0==this.scannedCollection.description.length&&t.nema.collection_infos&&(this.scannedCollection.description=t.nema.collection_infos),!this.scannedCollection.funds&&t.nema.collection_funds&&(this.scannedCollection.funds=t.nema.collection_funds),t.dc.language||this.scannedCollection.languages.add(t.dc.language),!this.scannedCollection.publisher&&(t.nema.publisher||t.nema.who_scans)&&(this.scannedCollection.publisher=t.nema.publisher?t.nema.publisher:t.nema.who_scans),t.dc.format&&(-1!=t.dc.format.indexOf("video")||-1!=t.dc.format.indexOf("audio"))&&(this.scannedCollection.typecollection="multimedia")}sendCloudNotices(){this.load=!0,this.set.addListeNotices(this.scannedData).subscribe({next:t=>{},error:t=>{console.error("Erreur sur la cr\xe9ation des notices : ",t),this.load=!1},complete:()=>{console.log("Envoie des notices termin\xe9"),this.sendCloudCollection()}})}sendCloudCollection(){this.scannedCollection.series=[...this.scannedCollection.series],this.scannedCollection.notices=[...this.scannedCollection.notices],this.scannedCollection.languages=[...this.scannedCollection.languages],this.scannedCollection.idcollections=this.fakeId,this.set.addCollection(this.scannedCollection).subscribe({next:t=>{console.log("Next",t)},error:t=>{this.load=!1,console.error("Notices ok mais la collection bloque",t)},complete:()=>{this.load=!1,console.info("Collection ajout\xe9e apr\xe8s ses notices")}})}delCoudNotices(){this.load=!0,this.set.deleteListeNotices(this.collection.notices).subscribe({next:t=>{console.log("Next",t)},error:t=>{this.load=!1,console.error(t)},complete:()=>{this.load=!1,console.info("complete")}})}static#e=this.\u0275fac=function(i){return new(i||n)(e.LFG(g.eN),e.LFG(v))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var b=r(1572),A=r(6399),C=r(600),h=r(7392),x=r(266);let w=(()=>{class n{constructor(t,i){this.authServ=t,this.l=i}ngOnInit(){}toggleActif(t){}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(A.e),e.Y36(C.g))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-sidenav"]],decls:34,vars:3,consts:[[1,"logo"],["href","","routerLink","/intranet","title","Nemateria || Valorisation de collections num\xe9ris\xe9es"],["src","./assets/img/Logo_Nemateria_v.png","alt","Nemateria || Valorisation de collections num\xe9ris\xe9es"],["routerLinkActive","active","routerLink","/intranet/collections",3,"matTooltip"],["routerLinkActive","active","routerLink","/intranet/scan",3,"matTooltip"],["routerLinkActive","active","routerLink","/intranet/prefixs",3,"matTooltip"],[1,"settings"],["routerLinkActive","active","matTooltip","Se d\xe9connecter",3,"click"],["routerLinkActive","active","routerLink","/intranet/profil","matTooltip","Acc\xe9der \xe0 mon profil"],["routerLinkActive","active","routerLink","/intranet/aide","matTooltip","Un peu d'aide ?"],["routerLinkActive","active","routerLink","/intranet/parametres","matTooltip","Votre profil et vos param\xe8tres"]],template:function(i,o){1&i&&(e.TgZ(0,"header",0)(1,"a",1),e._UZ(2,"img",2),e.qZA()(),e.TgZ(3,"nav")(4,"ul"),e._UZ(5,"hr"),e.TgZ(6,"li")(7,"a",3)(8,"mat-icon"),e._uU(9,"collections"),e.qZA()()(),e._UZ(10,"hr"),e.TgZ(11,"li")(12,"a",4)(13,"mat-icon"),e._uU(14,"scanner"),e.qZA()()(),e._UZ(15,"hr"),e.TgZ(16,"li")(17,"a",5)(18,"mat-icon"),e._uU(19,"perm_data_setting"),e.qZA()()(),e._UZ(20,"hr"),e.qZA()(),e.TgZ(21,"section",6)(22,"a",7),e.NdJ("click",function(){return o.authServ.deconnexion()}),e.TgZ(23,"mat-icon"),e._uU(24,"remove_circle_outline"),e.qZA()(),e.TgZ(25,"a",8)(26,"mat-icon"),e._uU(27,"account_circle"),e.qZA()(),e.TgZ(28,"a",9)(29,"mat-icon"),e._uU(30,"help_outline"),e.qZA()(),e.TgZ(31,"a",10)(32,"mat-icon"),e._uU(33,"settings"),e.qZA()()()),2&i&&(e.xp6(7),e.Q6J("matTooltip",o.l.t.MENU_COLLECTIONS_DESCR),e.xp6(5),e.Q6J("matTooltip",o.l.t.MENU_SCAN_DESCR),e.xp6(5),e.Q6J("matTooltip",o.l.t.MENU_PREFIXES_DESCR))},dependencies:[f.rH,f.Od,h.Hw,x.gM],styles:['nav[_ngcontent-%COMP%]{margin:auto 0}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:0;padding:0}nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:48px;height:48px;margin:0 auto 8px;background-color:#fff;list-style:none}nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:48px;height:48px;color:#000;display:flex;transition:all .3s ease}nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#ffd600}nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:auto;display:block}.active[_ngcontent-%COMP%]{background-color:#eb974e}header.logo[_ngcontent-%COMP%]{width:100%;margin:15px 0;min-height:10vh}header.logo[_ngcontent-%COMP%]:hover{text-shadow:0 0px 5px rgba(0,0,0,1)}.logo[_ngcontent-%COMP%]{display:flex;width:100%;font-size:8px;color:#ffd600}.logo[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:padding-box}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ffd600;margin:auto}.logo[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){margin:auto;width:100%;line-height:75px}.logo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:auto;width:100%;text-align:center;line-height:.8em;font-family:Lora,Arial,sans-serif;font-size:14px}.logo[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{line-height:.5em;font-weight:400}.logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]{height:40px;width:40px;overflow:hidden;content:"";position:absolute;margin-left:40px;margin-top:9px;transform:rotate(45deg);transform-origin:0 0}.logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]:before, .logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]:after, .logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:before, .logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{background-color:#ffd600;position:absolute;content:"";display:block;transition:all .4s ease-in-out}.logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]:before, .logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]:after{height:2px;width:40%}.logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:before, .logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{width:2px;height:40%}.logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]:before, .logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:before{left:0;top:0}.logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]:after, .logo[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{bottom:0;right:0}.settings[_ngcontent-%COMP%]{position:absolute;bottom:0;padding:10px;width:100%;display:flex;flex-flow:column nowrap;justify-content:space-between;color:#fff}.settings[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:auto}.settings[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}']})}return n})();function k(n,c){1&n&&(e.TgZ(0,"div",1),e._UZ(1,"mat-spinner"),e.qZA())}let I=(()=>{class n{constructor(t){this.get=t}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(d))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-interface"]],decls:6,vars:1,consts:[["id","loader",4,"ngIf"],["id","loader"]],template:function(i,o){1&i&&(e.YNc(0,k,2,0,"div",0),e.TgZ(1,"main")(2,"section"),e._UZ(3,"app-sidenav"),e.qZA(),e.TgZ(4,"section"),e._UZ(5,"router-outlet"),e.qZA()()),2&i&&e.Q6J("ngIf",o.get.load)},dependencies:[p.O5,f.lC,b.Ou,w],styles:["main[_ngcontent-%COMP%]{display:inline-flex}section[_ngcontent-%COMP%]:nth-child(1){width:90px;background-color:#304753}section[_ngcontent-%COMP%]:nth-child(2){width:calc(100% - 90px);height:100vh;flex-flow:column nowrap}app-sidenav[_ngcontent-%COMP%]{position:relative}"]})}return n})();var Z=r(3192),F=r(6550);function y(n,c){if(1&n&&(e.TgZ(0,"p"),e._UZ(1,"img",3),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("src",t.get.notice.media.url,e.LSH)}}function S(n,c){if(1&n&&(e.TgZ(0,"p",4)(1,"video",5),e._UZ(2,"source",6),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("src",t.get.notice.media.url,e.LSH)("type",t.get.notice.dublincore.format)}}function Q(n,c){if(1&n&&(e.TgZ(0,"p",4),e._UZ(1,"source",6),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("src",t.get.notice.media.url,e.LSH)("type",t.get.notice.dublincore.format)}}function Y(n,c){if(1&n&&(e.TgZ(0,"p"),e._UZ(1,"iframe",3),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("src",t.dom.bypassSecurityTrustResourceUrl(t.get.notice.media.url),e.uOi)}}function L(n,c){if(1&n&&(e.TgZ(0,"span")(1,"strong"),e._uU(2),e.qZA(),e._uU(3),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.key),e.xp6(1),e.hij(" : ",t.value," ")}}function D(n,c){if(1&n&&(e.TgZ(0,"span")(1,"strong"),e._uU(2),e.qZA(),e._uU(3),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.key),e.xp6(1),e.hij(" : ",t.value," ")}}function H(n,c){if(1&n&&(e.TgZ(0,"span")(1,"strong"),e._uU(2),e.qZA(),e._uU(3),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.key),e.xp6(1),e.hij(" : ",t.value," ")}}function j(n,c){if(1&n&&(e.TgZ(0,"li")(1,"strong"),e._uU(2),e.qZA(),e._uU(3),e.qZA()),2&n){const t=c.$implicit;e.xp6(2),e.Oqu(t.key),e.xp6(1),e.hij(" : ",t.value," ")}}function $(n,c){if(1&n&&(e.TgZ(0,"strong"),e._uU(1),e.qZA(),e.TgZ(2,"ul"),e.YNc(3,j,4,2,"li",7),e.ALo(4,"keyvalue"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.key),e.xp6(2),e.Q6J("ngForOf",e.lcZ(4,2,t.value))}}function G(n,c){if(1&n&&(e.TgZ(0,"li"),e.YNc(1,H,4,2,"span",8),e.YNc(2,$,5,4,"ng-template",null,11,e.W1O),e.qZA()),2&n){const t=c.$implicit,i=e.MAs(3),o=e.oxw(6);e.xp6(1),e.Q6J("ngIf","object"!==o.utils.typeOf(t.value))("ngIfElse",i)}}function K(n,c){if(1&n&&(e.TgZ(0,"strong"),e._uU(1),e.qZA(),e.TgZ(2,"ul"),e.YNc(3,G,4,2,"li",7),e.ALo(4,"keyvalue"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.key),e.xp6(2),e.Q6J("ngForOf",e.lcZ(4,2,t.value))}}function R(n,c){if(1&n&&(e.TgZ(0,"li"),e.YNc(1,D,4,2,"span",8),e.YNc(2,K,5,4,"ng-template",null,10,e.W1O),e.qZA()),2&n){const t=c.$implicit,i=e.MAs(3),o=e.oxw(4);e.xp6(1),e.Q6J("ngIf","object"!==o.utils.typeOf(t.value))("ngIfElse",i)}}function X(n,c){if(1&n&&(e.TgZ(0,"strong"),e._uU(1),e.qZA(),e.TgZ(2,"ul"),e.YNc(3,R,4,2,"li",7),e.ALo(4,"keyvalue"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.key),e.xp6(2),e.Q6J("ngForOf",e.lcZ(4,2,t.value))}}function B(n,c){if(1&n&&(e.TgZ(0,"li"),e.YNc(1,L,4,2,"span",8),e.YNc(2,X,5,4,"ng-template",null,9,e.W1O),e.qZA()),2&n){const t=c.$implicit,i=e.MAs(3),o=e.oxw(2);e.xp6(1),e.Q6J("ngIf","object"!==o.utils.typeOf(t.value))("ngIfElse",i)}}function V(n,c){if(1&n&&(e.TgZ(0,"article")(1,"ul"),e.YNc(2,B,4,2,"li",7),e.ALo(3,"keyvalue"),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",e.lcZ(3,1,t.get.notice))}}let q=(()=>{class n{constructor(t,i,o,l){this.get=t,this.utils=i,this.dom=o,this.auth=l,this.fermer=new e.vpe,this.update=!1}ngOnInit(){console.log(this.idNotice)}ngOnDestroy(){}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(d),e.Y36(Z.F),e.Y36(F.H7),e.Y36(A.e))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-notice"]],inputs:{idNotice:"idNotice"},outputs:{fermer:"fermer"},decls:11,vars:6,consts:[[3,"click"],[4,"ngIf"],["class","media",4,"ngIf"],[3,"src"],[1,"media"],["controls",""],[3,"src","type"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["elseBlockN",""],["elseObjM",""],["elseBlockL",""]],template:function(i,o){1&i&&(e.TgZ(0,"section")(1,"mat-icon",0),e.NdJ("click",function(){return o.fermer.emit(!1)}),e._uU(2,"close"),e.qZA(),e.TgZ(3,"header")(4,"h1"),e._uU(5),e.qZA(),e.YNc(6,y,2,1,"p",1),e.YNc(7,S,3,2,"p",2),e.YNc(8,Q,2,2,"p",2),e.YNc(9,Y,2,1,"p",1),e.qZA(),e.YNc(10,V,4,3,"article",1),e.qZA()),2&i&&(e.xp6(5),e.Oqu(o.get.notice.dublincore.title),e.xp6(1),e.Q6J("ngIf",o.get.notice.dublincore.format&&-1!=o.get.notice.dublincore.format.indexOf("image")),e.xp6(1),e.Q6J("ngIf",o.get.notice.dublincore.format&&-1!=o.get.notice.dublincore.format.indexOf("video")),e.xp6(1),e.Q6J("ngIf",o.get.notice.dublincore.format&&-1!=o.get.notice.dublincore.format.indexOf("audio")),e.xp6(1),e.Q6J("ngIf",o.get.notice.dublincore.format&&-1!=o.get.notice.dublincore.format.indexOf("application")),e.xp6(1),e.Q6J("ngIf",!o.update))},dependencies:[p.sg,p.O5,h.Hw,p.Nd],styles:["section[_ngcontent-%COMP%]{padding:10px 20px;flex-flow:row wrap}section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]{width:100%}section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:flex}section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:auto}section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%}h1[_ngcontent-%COMP%]{width:100%;padding:10px;text-align:center}video[_ngcontent-%COMP%], audio[_ngcontent-%COMP%]{max-width:100%}iframe[_ngcontent-%COMP%]{width:100%;min-height:500px}"]})}return n})();class z{constructor(){this.libre="",this.dateDebut="",this.dateFin="",this.type=""}}let U=(()=>{class n{transform(t,i){return t&&t.length?i?i.libre.length>2?t.filter(o=>{if(-1!==JSON.stringify(o).toLowerCase().indexOf(i.libre))return o}):i.type?t.filter(o=>{if(-1!==o.dc.format.indexOf(i.type))return o}):i.dateDebut?t.filter(o=>{let l=Date.parse(i.dateDebut);if(o.dc.date>=l)return o}):i.dateFin?t.filter(o=>{let l=Date.parse(i.dateFin);if(o.dc.date<=l)return o}):t:t:[]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275pipe=e.Yjl({name:"filtreNotices",type:n,pure:!1})}return n})();var T=r(9413),E=r(781);function W(n,c){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.l.t.DEPUBLIE)}}function ee(n,c){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.l.t.PUBLIE)}}function te(n,c){if(1&n&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&n){const t=c.$implicit;e.xp6(1),e.hij(" ",t," ")}}function ne(n,c){if(1&n&&(e.TgZ(0,"li"),e._uU(1),e.TgZ(2,"mat-icon",25),e._uU(3,"delete"),e.qZA()()),2&n){const t=c.$implicit,i=e.oxw(2);e.xp6(1),e.hij(" ",t.dc.title," "),e.xp6(1),e.Q6J("matTooltip",i.l.t.NOTICE_DEL)}}function oe(n,c){if(1&n&&(e.TgZ(0,"section")(1,"h3"),e._uU(2),e.qZA(),e.TgZ(3,"ul"),e.YNc(4,ne,4,2,"li",22),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.l.t.NOTICES),e.xp6(2),e.Q6J("ngForOf",t.get.notices)}}let N=(()=>{class n{constructor(t,i,o){this.get=t,this.tokenServ=i,this.l=o,this.fermer=new e.vpe,this.affiche=!1,this.maj=!1,this.cree=!1}ngOnInit(){}collectionOnClick(){this.affiche=!0}afficheMaj(){this.maj=!this.maj}ecrire(){console.log(this.get.collection),this.get.collection.idcollections?this.get.set.updateCollection(this.get.collection).subscribe({next:t=>{console.log("Next",t)},error:t=>console.error(t),complete:()=>console.info("complete")}):this.get.set.addCollection(this.get.collection).subscribe({next:t=>{console.log("Next",t)},error:t=>console.error(t),complete:()=>console.info("complete")})}mapSet(t){let i={};for(let o in t)i.hasOwnProperty(o)&&"_id"!=o&&(i[o]=t[o]);return console.log(i),i.series=new Set,t.documents.forEach(o=>{o.nemateria.serie&&i.series.add(o.nemateria.serie)}),i}genereNotices(){}supprimeNotice(t){}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(d),e.Y36(T.B),e.Y36(C.g))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-collection"]],inputs:{collection:"collection",idCollection:"idCollection"},outputs:{fermer:"fermer"},decls:61,vars:30,consts:[[1,"unique"],[3,"click"],[3,"innerHTML"],["f","ngForm"],["type","checkbox",3,"ngModel","checked","ngModelChange"],[4,"ngIf"],["for","titre"],["name","titre","required","",3,"ngModel","ngModelChange"],["for","alias"],["name","alias","required","","pattern","[a-z0-9-]+",3,"ngModel","ngModelChange"],["for","description"],["mat-input","","name","description","required","",3,"ngModel","ngModelChange"],["for","mediatype"],["name","mediatype","required","",3,"ngModel","ngModelChange"],["value","images"],["value","multimedia"],["for","createur"],["name","createur","required","",3,"ngModel","ngModelChange"],["for","fonds"],["name","fonds",3,"ngModel","ngModelChange"],["for","lang"],["name","lang",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"invalid",3,"click"],[1,"valid",3,"disabled","click"],[3,"matTooltip"]],template:function(i,o){if(1&i&&(e.TgZ(0,"section",0)(1,"header")(2,"h3"),e._uU(3),e.TgZ(4,"mat-icon",1),e.NdJ("click",function(){return o.fermer.emit(!1)}),e._uU(5,"close"),e.qZA()(),e.TgZ(6,"h2"),e._uU(7),e.qZA(),e._UZ(8,"p",2),e.qZA(),e.TgZ(9,"form")(10,"section")(11,"form",null,3)(13,"article")(14,"div")(15,"input",4),e.NdJ("ngModelChange",function(s){return o.get.collection.draft=s}),e.qZA(),e.TgZ(16,"label"),e._uU(17),e.YNc(18,W,2,1,"span",5),e.YNc(19,ee,2,1,"span",5),e._uU(20,") "),e.qZA()(),e.TgZ(21,"label",6),e._uU(22),e.qZA(),e.TgZ(23,"input",7),e.NdJ("ngModelChange",function(s){return o.get.collection.title=s}),e.qZA(),e.TgZ(24,"label",8),e._uU(25),e.qZA(),e.TgZ(26,"input",9),e.NdJ("ngModelChange",function(s){return o.get.collection.alias=s}),e.qZA(),e.TgZ(27,"label",10),e._uU(28),e.qZA(),e.TgZ(29,"textarea",11),e.NdJ("ngModelChange",function(s){return o.get.collection.description=s}),e._uU(30,"                    "),e.qZA(),e.TgZ(31,"label",12),e._uU(32),e.qZA(),e.TgZ(33,"select",13),e.NdJ("ngModelChange",function(s){return o.get.collection.typecollection=s}),e.TgZ(34,"option",14),e._uU(35),e.qZA(),e.TgZ(36,"option",15),e._uU(37),e.qZA()(),e.TgZ(38,"label",16),e._uU(39),e.qZA(),e.TgZ(40,"input",17),e.NdJ("ngModelChange",function(s){return o.get.collection.creator=s}),e.qZA(),e.TgZ(41,"label",18),e._uU(42),e.qZA(),e.TgZ(43,"input",19),e.NdJ("ngModelChange",function(s){return o.get.collection.funds=s}),e.qZA(),e.TgZ(44,"label",20),e._uU(45),e.qZA(),e.TgZ(46,"input",21),e.NdJ("ngModelChange",function(s){return o.get.collection.languages=s}),e.qZA()()(),e.TgZ(47,"article")(48,"h3"),e._uU(49),e.qZA(),e.TgZ(50,"mat-icon"),e._uU(51,"add"),e.qZA(),e.TgZ(52,"ul"),e.YNc(53,te,2,1,"li",22),e.qZA(),e._UZ(54,"hr"),e.TgZ(55,"p")(56,"button",23),e.NdJ("click",function(){return o.fermer.emit(!1)}),e._uU(57),e.qZA(),e.TgZ(58,"button",24),e.NdJ("click",function(){return o.ecrire()}),e._uU(59),e.qZA()()()(),e.YNc(60,oe,5,2,"section",5),e.qZA()()),2&i){const l=e.MAs(12);e.xp6(3),e.hij("",o.l.t.COLLECTION_EDIT_TITRE," "),e.xp6(4),e.Oqu(o.get.collection.title),e.xp6(1),e.Q6J("innerHTML",o.l.t.COLLECTION_ALERTE,e.oJD),e.xp6(7),e.Q6J("ngModel",o.get.collection.draft)("checked",o.get.collection.draft),e.xp6(2),e.hij(" ",o.l.t.PUBLIE_STATUT," ("),e.xp6(1),e.Q6J("ngIf",o.get.collection.draft),e.xp6(1),e.Q6J("ngIf",!o.get.collection.draft),e.xp6(3),e.Oqu(o.l.t.TITRE),e.xp6(1),e.Q6J("ngModel",o.get.collection.title),e.xp6(2),e.Oqu(o.l.t.ALIAS),e.xp6(1),e.Q6J("ngModel",o.get.collection.alias),e.xp6(2),e.Oqu(o.l.t.DESCR),e.xp6(1),e.Q6J("ngModel",o.get.collection.description),e.xp6(3),e.Oqu(o.l.t.TYPE),e.xp6(1),e.Q6J("ngModel",o.get.collection.typecollection),e.xp6(2),e.Oqu(o.l.t.IMAGES),e.xp6(2),e.Oqu(o.l.t.MULTI),e.xp6(2),e.Oqu(o.l.t.CREATEUR),e.xp6(1),e.Q6J("ngModel",o.get.collection.creator),e.xp6(2),e.Oqu(o.l.t.FONDS),e.xp6(1),e.Q6J("ngModel",o.get.collection.funds),e.xp6(2),e.Oqu(o.l.t.LANGUE),e.xp6(1),e.Q6J("ngModel",o.get.collection.languages),e.xp6(3),e.Oqu(o.l.t.SERIES),e.xp6(4),e.Q6J("ngForOf",o.get.collection.series),e.xp6(4),e.Oqu(o.l.t.ANNULE),e.xp6(1),e.Q6J("disabled",l.invalid||o.tokenServ.statut<2),e.xp6(1),e.Oqu(o.l.t.COLLECTION_SAVE),e.xp6(1),e.Q6J("ngIf",o.get.notices&&o.idCollection)}},dependencies:[p.sg,p.O5,h.Hw,x.gM,a._Y,a.YN,a.Kr,a.Fj,a.Wl,a.EJ,a.JJ,a.JL,a.Q7,a.c5,a.On,a.F]})}return n})();function ie(n,c){if(1&n&&(e.TgZ(0,"video",33),e._UZ(1,"source",34),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("poster",t.dublincore.coverage,e.LSH),e.xp6(1),e.Q6J("src",t.media.url,e.LSH)("type",t.dublincore.format)}}function ce(n,c){if(1&n&&(e.TgZ(0,"audio"),e._UZ(1,"source",34),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("src",t.media.url,e.LSH)("type",t.dublincore.format)}}function le(n,c){1&n&&(e.TgZ(0,"mat-icon"),e._uU(1,"check_circle"),e.qZA())}function se(n,c){1&n&&(e.TgZ(0,"mat-icon"),e._uU(1,"check_circle_outline"),e.qZA())}function ae(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"li",26)(1,"div"),e.YNc(2,ie,2,3,"video",27),e.YNc(3,ce,2,2,"audio",23),e.TgZ(4,"div",28),e.NdJ("mouseenter",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.utils.play(o))})("mouseleave",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.utils.pause(o))})("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.fake())}),e.TgZ(5,"div")(6,"mat-icon",29),e.NdJ("click",function(){const l=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.noticeOnAffiche(l._id))}),e._uU(7,"visibility"),e.qZA(),e.TgZ(8,"mat-icon",30),e.NdJ("click",function(){const l=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.noticeSelectionnee(l._id))}),e._uU(9,"add_circle"),e.qZA(),e.TgZ(10,"mat-icon",31),e.NdJ("click",function(){const l=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.noticeSelectionRemove(l._id))}),e._uU(11,"remove_circle"),e.qZA(),e.TgZ(12,"mat-icon",32),e.NdJ("click",function(){const l=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.noticeOnInfo(l._id))}),e._uU(13,"info"),e.qZA()()()(),e.TgZ(14,"div")(15,"h3"),e._uU(16),e.qZA(),e.TgZ(17,"p"),e._uU(18),e.qZA(),e.TgZ(19,"div"),e.YNc(20,le,2,0,"mat-icon",23),e.YNc(21,se,2,0,"mat-icon",23),e.qZA()()()}if(2&n){const t=c.$implicit,i=e.oxw();e.xp6(1),e.Udp("background-image",i.utils.setNoticeBg(t)),e.ekj("choix",t.selected),e.xp6(1),e.Q6J("ngIf",t.dublincore.format&&-1!=t.dublincore.format.indexOf("video")),e.xp6(1),e.Q6J("ngIf",t.dublincore.format&&-1!=t.dublincore.format.indexOf("audio")),e.xp6(13),e.Oqu(t.dublincore.title),e.xp6(2),e.Oqu(t.dublincore.description),e.xp6(2),e.Q6J("ngIf",t.selected),e.xp6(1),e.Q6J("ngIf",!t.selected)}}function re(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"mat-icon",35),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.noticesSuppr())}),e._uU(1,"delete_forever"),e.qZA()}}function _e(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"mat-chip-list")(2,"mat-chip",36),e.NdJ("removed",function(){const l=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.noticeSelectionRemove(l._id))}),e._uU(3),e.TgZ(4,"mat-icon",37),e._uU(5,"cancel"),e.qZA()()()()}if(2&n){const t=c.$implicit;e.xp6(3),e.hij(" ",t.dublincore.title," ")}}function pe(n,c){if(1&n&&(e.TgZ(0,"article")(1,"h3"),e._uU(2),e.qZA(),e.TgZ(3,"ul")(4,"li"),e._uU(5),e.qZA(),e.TgZ(6,"li"),e._uU(7),e.qZA(),e.TgZ(8,"li"),e._uU(9),e.qZA()()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.noticeChoisie.dublincore.title),e.xp6(3),e.Oqu(t.noticeChoisie.dublincore.description),e.xp6(2),e.Oqu(t.noticeChoisie.media.file),e.xp6(2),e.Oqu(t.noticeChoisie.media.url)}}function ue(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"app-notice",38),e.NdJ("fermer",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.masque())}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("idNotice",t.idNotice)}}function ge(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"app-collection",39),e.NdJ("fermer",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.masque())}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("idCollection",t.idCollection)}}let de=(()=>{class n{constructor(t,i,o,l){this.get=t,this.utils=i,this.noticesPipe=o,this.tokenServ=l,this.noticeListe=[],this.noticeSelection=[],this.noticeAffiche=!1,this.afficheDetailNotice=!1,this.afficheDetailCollec=!1}ngOnInit(){this.idNotice=-1,this.filtre=new z}noticeOnAffiche(t){this.idNotice=t,this.afficheDetailNotice=!this.afficheDetailNotice}noticeSelectionnee(t){this.idNotice=t,this.noticeSelection.find(i=>i.idnotices==t)&&this.noticeSelectionRemove(t)}noticeOnInfo(t){}noticeSelectionDump(){this.noticeAffiche=!1,this.noticeSelection=[]}noticeSelectionRemove(t){for(let i=0;i<this.noticeSelection.length;i++){let o=this.noticeSelection[i];o.selected=!1,o.idnotices==t&&this.noticeSelection.splice(i,1)}}noticesToutesChoisies(){}noticesAucuneChoisie(){this.noticeSelection=[]}masque(t){this.afficheDetailNotice=t,this.afficheDetailCollec=t,this.idNotice=-1,this.idCollection=-1}collectionOnAffiche(t=-1){this.idCollection=t,this.afficheDetailCollec=!0}fake(){}noticesSuppr(){}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(d),e.Y36(Z.F),e.Y36(U),e.Y36(T.B))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-notices"]],decls:51,vars:13,consts:[[1,"screen","double"],[1,"filtre"],["for","libre"],["name","libre","placeholder","Filtre libre",3,"ngModel","ngModelChange"],["for","dateDebut"],["name","dateDebut","type","date","placeholder","A partir de...",3,"ngModel","ngModelChange"],["for","dateFin"],["name","dateFin","type","date","placeholder","... jusqu'\xe0",3,"ngModel","ngModelChange"],["for","type"],["name","type","placeholder","Type de fichiers",3,"ngModel","ngModelChange"],["value","image"],["value","video"],["value","audio"],["value","application"],[1,"notice-liste"],["class","notice",4,"ngFor","ngForOf"],[1,"right-panel"],[1,"demi"],["matTooltip","S\xe9lectionner toutes les notices",3,"click"],["matTooltip","D\xe9selectionner toutes les notices",3,"click"],["matTooltip","Cr\xe9er une collection \xe0 partir de la s\xe9lection",3,"click"],["matTooltip","Supprimer les notices s\xe9lectionn\xe9es",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","unique",3,"idNotice","fermer",4,"ngIf"],["class","unique",3,"idCollection","fermer",4,"ngIf"],[1,"notice"],[3,"poster",4,"ngIf"],[3,"mouseenter","mouseleave","click"],["matTooltip","Voir la fiche de la notice",3,"click"],["matTooltip","Ajouter cette notice \xe0 la liste s\xe9lectionn\xe9e",3,"click"],["matTooltip","Supprimer la notice",3,"click"],["matTooltip","Informations rapides sur la notice",3,"click"],[3,"poster"],[3,"src","type"],["matTooltip","Supprimer les notices s\xe9lectionn\xe9es",3,"click"],[3,"removed"],["matChipRemove",""],[1,"unique",3,"idNotice","fermer"],[1,"unique",3,"idCollection","fermer"]],template:function(i,o){1&i&&(e.TgZ(0,"section",0)(1,"section")(2,"header",1)(3,"h2"),e._uU(4,"Filtrer les notices"),e.qZA(),e.TgZ(5,"form")(6,"label",2),e._uU(7,"Filtre libre "),e.TgZ(8,"input",3),e.NdJ("ngModelChange",function(s){return o.filtre.libre=s}),e.qZA()(),e.TgZ(9,"label",4),e._uU(10,"Date de cr\xe9ation (d\xe9but) "),e.TgZ(11,"input",5),e.NdJ("ngModelChange",function(s){return o.filtre.dateDebut=s}),e.qZA()(),e.TgZ(12,"label",6),e._uU(13,"Date de cr\xe9ation (fin) "),e.TgZ(14,"input",7),e.NdJ("ngModelChange",function(s){return o.filtre.dateFin=s}),e.qZA()(),e.TgZ(15,"label",8),e._uU(16,"Types de fichiers "),e.TgZ(17,"select",9),e.NdJ("ngModelChange",function(s){return o.filtre.type=s}),e.TgZ(18,"option",10),e._uU(19,"Images"),e.qZA(),e.TgZ(20,"option",11),e._uU(21,"Vid\xe9os"),e.qZA(),e.TgZ(22,"option",12),e._uU(23,"Audio"),e.qZA(),e.TgZ(24,"option",13),e._uU(25,"Textes"),e.qZA()()()()(),e.TgZ(26,"ul",14),e.YNc(27,ae,22,10,"li",15),e.ALo(28,"filtreNotices"),e.qZA()(),e.TgZ(29,"aside",16)(30,"section",17)(31,"header")(32,"h4"),e._uU(33,"Actions group\xe9es : "),e.qZA(),e.TgZ(34,"mat-icon",18),e.NdJ("click",function(){return o.noticesToutesChoisies()}),e._uU(35,"filter"),e.qZA(),e.TgZ(36,"mat-icon",19),e.NdJ("click",function(){return o.noticesAucuneChoisie()}),e._uU(37,"filter_none"),e.qZA(),e.TgZ(38,"mat-icon",20),e.NdJ("click",function(){return o.collectionOnAffiche()}),e._uU(39,"collections"),e.qZA(),e.YNc(40,re,2,0,"mat-icon",21),e.qZA(),e.TgZ(41,"h2"),e._uU(42,"Liste des notices s\xe9lectionn\xe9es"),e.qZA(),e.TgZ(43,"ul"),e.YNc(44,_e,6,1,"li",22),e.qZA()(),e.TgZ(45,"section",17)(46,"h2"),e._uU(47,"M\xe9tadonn\xe9es d\u2019une notice s\xe9lectionn\xe9e"),e.qZA(),e.YNc(48,pe,10,4,"article",23),e.qZA()()(),e.YNc(49,ue,1,1,"app-notice",24),e.YNc(50,ge,1,1,"app-collection",25)),2&i&&(e.xp6(8),e.Q6J("ngModel",o.filtre.libre),e.xp6(3),e.Q6J("ngModel",o.filtre.dateDebut),e.xp6(3),e.Q6J("ngModel",o.filtre.dateFin),e.xp6(3),e.Q6J("ngModel",o.filtre.type),e.xp6(10),e.Q6J("ngForOf",e.xi3(28,10,o.get.notices,o.filtre)),e.xp6(13),e.Q6J("ngIf",o.tokenServ.statut>=2),e.xp6(4),e.Q6J("ngForOf",o.noticeSelection),e.xp6(4),e.Q6J("ngIf",o.noticeAffiche),e.xp6(1),e.Q6J("ngIf",o.afficheDetailNotice),e.xp6(1),e.Q6J("ngIf",o.afficheDetailCollec))},dependencies:[p.sg,p.O5,E.HS,E.qH,h.Hw,x.gM,a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.On,a.F,q,N,U],styles:["section[_ngcontent-%COMP%] > section[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{padding:0;margin:0}aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;display:inline-block;margin:5px}aside[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]:nth-child(1){background-color:#a3c6c2}aside[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]:nth-child(2){background-color:#13c7af}"]})}return n})();function me(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"li",10),e.NdJ("click",function(){const l=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.colClick(l.idcollections))}),e._uU(1),e.qZA()}if(2&n){const t=c.$implicit;e.xp6(1),e.AsE(" ",t.title," (",t.funds,") ")}}function fe(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"mat-icon",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.delete=!0)}),e._uU(2,"delete"),e.qZA(),e.TgZ(3,"mat-icon",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.detailsCollec=!0)}),e._uU(4,"edit"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("matTooltip",t.l.t.SET_DEL),e.xp6(2),e.Q6J("matTooltip",t.l.t.COLLECTION_EDIT)}}function he(n,c){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.l.t.PUBLIE)}}function Ce(n,c){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.l.t.DEPUBLIE)}}function xe(n,c){if(1&n&&(e.TgZ(0,"li")(1,"strong"),e._uU(2),e.qZA(),e._uU(3),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.key),e.xp6(1),e.hij(" : ",t.value," ")}}function Ze(n,c){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,xe,4,2,"li",4),e.qZA()),2&n){const t=c.$implicit;e.xp6(1),e.Q6J("ngIf","notices"!=t.key&&"series"!=t.key&&"online"!=t.key)}}function Te(n,c){if(1&n&&(e.TgZ(0,"article")(1,"h3"),e._uU(2),e.YNc(3,he,2,1,"span",4),e.YNc(4,Ce,2,1,"span",4),e._uU(5,")"),e.qZA(),e.TgZ(6,"ul"),e.YNc(7,Ze,2,1,"div",12),e.ALo(8,"keyvalue"),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.hij("",t.get.collection.title," ("),e.xp6(1),e.Q6J("ngIf",t.get.collection.online),e.xp6(1),e.Q6J("ngIf",!t.get.collection.online),e.xp6(3),e.Q6J("ngForOf",e.lcZ(8,4,t.get.collection))}}function Oe(n,c){if(1&n&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&n){const t=c.$implicit;e.xp6(1),e.hij(" ",t," ")}}function Me(n,c){if(1&n&&(e.TgZ(0,"article")(1,"h3"),e._uU(2),e.qZA(),e.TgZ(3,"ul",13),e.YNc(4,Oe,2,1,"li",12),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.l.t.COLLECTION_SERIES),e.xp6(2),e.Q6J("ngForOf",t.get.collection.series)}}function Ae(n,c){if(1&n&&(e.TgZ(0,"video",20),e._UZ(1,"source",21),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("poster",t.dc.coverage,e.LSH),e.xp6(1),e.Q6J("src",t.media.url,e.LSH)("type",t.dc.format)}}function qe(n,c){if(1&n&&(e.TgZ(0,"audio"),e._UZ(1,"source",21),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("src",i.utils.setNoticeUrl(i.get.config.s3,t),e.LSH)("type",t.dc.format)}}function Ne(n,c){if(1&n&&(e.TgZ(0,"div")(1,"h3"),e._uU(2),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.dc.title),e.xp6(2),e.Oqu(t.dc.description)}}function ve(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"li",17)(1,"div"),e.YNc(2,Ae,2,3,"video",18),e.YNc(3,qe,2,2,"audio",4),e.TgZ(4,"div",19),e.NdJ("mouseenter",function(o){e.CHM(t);const l=e.oxw(2);return e.KtG(l.utils.play(o))})("mouseleave",function(o){e.CHM(t);const l=e.oxw(2);return e.KtG(l.utils.pause(o))}),e.TgZ(5,"div")(6,"mat-icon",11),e.NdJ("click",function(){const l=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.idNotice=l.idnotices)}),e._uU(7," visibility"),e.qZA(),e.TgZ(8,"mat-icon",11),e.NdJ("click",function(){const l=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.noticeOnEnlever(l._id))}),e._uU(9,"remove_circle"),e.qZA()()()(),e.YNc(10,Ne,5,2,"div",4),e.qZA()}if(2&n){const t=c.$implicit,i=e.oxw(2);e.xp6(1),e.Udp("background-image",i.utils.setNoticeBg(i.get.config.s3,t)),e.xp6(1),e.Q6J("ngIf",t.dc.format&&-1!=t.dc.format.indexOf("video")),e.xp6(1),e.Q6J("ngIf",t.dc.format&&-1!=t.dc.format.indexOf("audio")),e.xp6(3),e.Q6J("matTooltip",i.l.t.NOTICE_SHOW),e.xp6(2),e.Q6J("matTooltip",i.l.t.NOTICE_DEL),e.xp6(2),e.Q6J("ngIf",i.idCollection)}}function Ue(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"ul",14),e.YNc(1,ve,11,7,"li",15),e.ALo(2,"slice"),e.TgZ(3,"div",16)(4,"button",10),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.suite(!1))}),e._uU(5," < "),e.qZA(),e.TgZ(6,"button",10),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.suite(!0))}),e._uU(7," > "),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.Dn7(2,1,t.get.notices,t.pagine.d,t.pagine.d+t.pagine.e))}}function Ee(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"section",22)(1,"article")(2,"h3"),e._uU(3),e.qZA(),e._UZ(4,"div",23),e.TgZ(5,"button"),e._uU(6),e.qZA(),e.TgZ(7,"button",10),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.masque())}),e._uU(8),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(3),e.Oqu(t.l.t.NOTICE_DEL),e.xp6(1),e.Q6J("innerHTML",t.l.t.NOTICE_DEL_DESCR,e.oJD),e.xp6(2),e.Oqu(t.l.t.NOTICE_DEL_VALIDE),e.xp6(2),e.Oqu(t.l.t.ANNULE)}}function Je(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"section",22)(1,"article")(2,"h2"),e._uU(3),e.qZA(),e.TgZ(4,"p")(5,"mat-icon",24),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.delete=!1)}),e._uU(6,"cancel"),e.qZA(),e.TgZ(7,"mat-icon",24),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.colServ.supprCollec(o.colServ.collection._id),e.KtG(o.delete=!1)}),e._uU(8,"check_circle"),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(3),e.Oqu(t.l.t.SUR),e.xp6(2),e.Q6J("matTooltip",t.l.t.ANNULE_DEL),e.xp6(2),e.Q6J("matTooltip",t.l.t.VALIDE_DEL)}}function Pe(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"app-collection",25),e.NdJ("fermer",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.masque())}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("idCollection",t.idCollection)}}function be(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"app-notice",26),e.NdJ("fermer",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.masque())}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("idNotice",t.idNotice)}}let J=(()=>{class n{constructor(t,i,o,l){this.tokenServ=t,this.get=i,this.utils=o,this.l=l,this.collectionListe=[],this.detailsCollec=!1,this.afficheEnlever=!1,this.delete=!1,this.pagine={d:0,e:20},this.filtreSerie=""}ngOnInit(){}colClick(t){console.log("Collection cliqu\xe9e",t),this.idCollection=t,this.get.collection=this.get.collections.find(i=>i.idcollections=t),this.get.getNoticesByCollec(this.get.collection.notices)}noticeOnEnlever(t){console.log("Notice \xe0 enlever",t),this.idNotice=t,this.afficheEnlever=!0}masque(){this.detailsCollec=!1,this.afficheEnlever=!1}suite(t){console.log(this.pagine,this.get.notices.length),t?this.pagine.d+this.pagine.e<this.get.notices.length-1?this.pagine.d+=this.pagine.e:this.pagine.d=this.pagine.d+this.pagine.e-this.get.notices.length-1:this.pagine.d-this.pagine.e<0?this.pagine.d=this.get.notices.length-1+this.pagine.d-this.pagine.e:this.pagine.d-=this.pagine.e,console.log(this.pagine,this.get.notices.length)}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(T.B),e.Y36(d),e.Y36(Z.F),e.Y36(C.g))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-collections"]],decls:23,vars:12,consts:[[1,"screen","triple"],[1,"left-panel"],["routerLink","/intranet/scan",3,"matTooltip"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"selection"],["class","notice-liste",4,"ngIf"],["class","pop-up",4,"ngIf"],["class","unique",3,"idCollection","fermer",4,"ngIf"],["class","unique",3,"idNotice","fermer",4,"ngIf"],[3,"click"],[3,"matTooltip","click"],[4,"ngFor","ngForOf"],[1,"series"],[1,"notice-liste"],["class","notice",4,"ngFor","ngForOf"],[1,"h"],[1,"notice"],[3,"poster",4,"ngIf"],[3,"mouseenter","mouseleave"],[3,"poster"],[3,"src","type"],[1,"pop-up"],[3,"innerHTML"],[1,"grand",3,"matTooltip","click"],[1,"unique",3,"idCollection","fermer"],[1,"unique",3,"idNotice","fermer"]],template:function(i,o){1&i&&(e.TgZ(0,"section",0)(1,"aside",1)(2,"header")(3,"h1"),e._uU(4),e.qZA(),e.TgZ(5,"mat-icon",2),e._uU(6,"playlist_add"),e.qZA()(),e.TgZ(7,"ul"),e.YNc(8,me,2,2,"li",3),e.qZA()(),e.TgZ(9,"section")(10,"header"),e.YNc(11,fe,5,2,"div",4),e.TgZ(12,"h2"),e._uU(13),e.qZA()(),e.YNc(14,Te,9,6,"article",4),e.YNc(15,Me,5,2,"article",4),e.qZA(),e.TgZ(16,"aside")(17,"section",5),e.YNc(18,Ue,8,5,"ul",6),e.qZA()()(),e.YNc(19,Ee,9,4,"section",7),e.YNc(20,Je,9,3,"section",7),e.YNc(21,Pe,1,1,"app-collection",8),e.YNc(22,be,1,1,"app-notice",9)),2&i&&(e.xp6(4),e.Oqu(o.l.t.COLLECTION),e.xp6(1),e.Q6J("matTooltip",o.l.t.COLLECTION_ADD),e.xp6(3),e.Q6J("ngForOf",o.get.collections),e.xp6(3),e.Q6J("ngIf",o.idCollection),e.xp6(2),e.Oqu(o.l.t.COLLECTION_DESCR),e.xp6(1),e.Q6J("ngIf",o.idCollection),e.xp6(1),e.Q6J("ngIf",o.get.collection.series&&o.idCollection),e.xp6(3),e.Q6J("ngIf",o.idCollection),e.xp6(1),e.Q6J("ngIf",o.afficheEnlever),e.xp6(1),e.Q6J("ngIf",o.delete&&o.tokenServ.statut>=2),e.xp6(1),e.Q6J("ngIf",o.detailsCollec),e.xp6(1),e.Q6J("ngIf",o.idNotice))},dependencies:[p.sg,p.O5,f.rH,h.Hw,x.gM,q,N,p.OU,p.Nd],styles:["section.screen[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{flex-grow:3;min-width:30%}aside[_ngcontent-%COMP%]:nth-child(3){flex-grow:4;min-width:40%;background-color:#ffd50080;padding:0}aside[_ngcontent-%COMP%]:nth-child(3)   .notice[_ngcontent-%COMP%]{width:50%}aside[_ngcontent-%COMP%]:nth-child(3)   ul[_ngcontent-%COMP%], aside[_ngcontent-%COMP%]:nth-child(3)   section[_ngcontent-%COMP%]{padding:0;margin:0}"]})}return n})();var we=r(2340);function ke(n,c){1&n&&(e.TgZ(0,"button"),e._uU(1,"Enregistrer"),e.qZA())}function Ie(n,c){if(1&n&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&n){const t=c.$implicit;e.xp6(1),e.AsE(" ",t.key," : ",t.value," ... ")}}let Fe=(()=>{class n{constructor(t){this.uServ=t}ngOnInit(){this.env=we.N}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(A.e))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-parametres"]],decls:19,vars:5,consts:[[1,"screen","triple"],["name","serv",3,"ngModel","ngModelChange"],["ctlServ","ngModel"],[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(i,o){if(1&i&&(e.TgZ(0,"section",0)(1,"aside")(2,"h2"),e._uU(3,"Param\xe8tres"),e.qZA()(),e.TgZ(4,"section")(5,"h2"),e._uU(6,"Serveur de donn\xe9es"),e.qZA(),e.TgZ(7,"p"),e._uU(8,"Adresse de la base de donn\xe9es :"),e.qZA(),e.TgZ(9,"input",1,2),e.NdJ("ngModelChange",function(s){return o.env.SERV=s}),e.qZA(),e.YNc(11,ke,2,0,"button",3),e._UZ(12,"p"),e.qZA(),e.TgZ(13,"aside")(14,"h2"),e._uU(15,"Votre profil"),e.qZA(),e.TgZ(16,"ul"),e.YNc(17,Ie,2,2,"li",4),e.ALo(18,"keyvalue"),e.qZA()()()),2&i){const l=e.MAs(10);e.xp6(9),e.Q6J("ngModel",o.env.SERV),e.xp6(2),e.Q6J("ngIf",l.touched),e.xp6(6),e.Q6J("ngForOf",e.lcZ(18,3,o.uServ.userAuth))}},dependencies:[p.sg,p.O5,a.Fj,a.JJ,a.On,p.Nd],styles:["section.triple[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{width:35vw}section.triple[_ngcontent-%COMP%] > aside[_ngcontent-%COMP%]:nth-child(1){width:30vw}section.triple[_ngcontent-%COMP%] > aside[_ngcontent-%COMP%]:nth-child(3){width:35vw}section.screen[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{padding:10px 15px}section.screen[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{float:right}aside[_ngcontent-%COMP%]:nth-child(1){background-color:#f06060;flex-grow:1;min-width:150px;color:#fff}*[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]:nth-child(1)   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:10px;margin-bottom:5px;background:#FFF;transition:all .3s ease}aside[_ngcontent-%COMP%]:nth-child(1)   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-top:-5px;float:right}aside[_ngcontent-%COMP%]:nth-child(1)   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:grey}aside[_ngcontent-%COMP%]:nth-child(1) > *[_ngcontent-%COMP%]{width:100%}section.screen[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex-grow:1}aside[_ngcontent-%COMP%]:nth-child(3){flex-grow:1;background-color:#f060607a;padding:0}aside[_ngcontent-%COMP%]:nth-child(3)   ul[_ngcontent-%COMP%], aside[_ngcontent-%COMP%]:nth-child(3)   section[_ngcontent-%COMP%]{padding:0;margin:0}"]})}return n})(),ye=(()=>{class n{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-profil"]],decls:2,vars:0,template:function(i,o){1&i&&(e.TgZ(0,"p"),e._uU(1,"profil works!"),e.qZA())}})}return n})();var M=r(7084);function Se(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"li",2),e.NdJ("click",function(){const l=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.scanFold(l))}),e._uU(1),e.qZA()}if(2&n){const t=c.$implicit;e.xp6(1),e.hij(" ",t," ")}}function Qe(n,c){if(1&n&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&n){const t=c.$implicit;e.xp6(1),e.AsE("",t.key," : ",t.value,"")}}function Ye(n,c){if(1&n&&(e.TgZ(0,"ul"),e.YNc(1,Qe,2,2,"li",6),e.ALo(2,"keyvalue"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t.dc))}}function Le(n,c){if(1&n&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&n){const t=c.$implicit;e.xp6(1),e.AsE("",t.key," : ",t.value,"")}}function De(n,c){if(1&n&&(e.TgZ(0,"ul"),e.YNc(1,Le,2,2,"li",6),e.ALo(2,"keyvalue"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t.nema))}}function He(n,c){if(1&n&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&n){const t=c.$implicit;e.xp6(1),e.AsE("",t.key," : ",t.value,"")}}function je(n,c){if(1&n&&(e.TgZ(0,"ul"),e.YNc(1,He,2,2,"li",6),e.ALo(2,"keyvalue"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t.media))}}function $e(n,c){if(1&n&&(e.TgZ(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title"),e._uU(3),e.qZA(),e.TgZ(4,"mat-panel-description"),e._uU(5),e.qZA()(),e.YNc(6,Ye,3,3,"ul",4),e.YNc(7,De,3,3,"ul",4),e.YNc(8,je,3,3,"ul",4),e.qZA()),2&n){const t=c.$implicit,i=c.index;e.xp6(3),e.Oqu(i+1),e.xp6(2),e.Oqu(t.idnotices),e.xp6(1),e.Q6J("ngIf",t.dc),e.xp6(1),e.Q6J("ngIf",t.nema),e.xp6(1),e.Q6J("ngIf",t.media)}}function Ge(n,c){if(1&n&&(e.TgZ(0,"article")(1,"h3"),e._uU(2,"Notices scann\xe9es"),e.qZA(),e.YNc(3,$e,9,5,"mat-expansion-panel",6),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.get.scannedData)}}function Ke(n,c){if(1&n&&(e.TgZ(0,"option",25),e._uU(1),e.qZA()),2&n){const t=c.$implicit;e.Q6J("value",c.index),e.xp6(1),e.hij("Mettre \xe0 jour la collection : ",t.title,"")}}function Re(n,c){if(1&n&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&n){const t=c.$implicit;e.xp6(1),e.hij(" ",t," ")}}function Xe(n,c){if(1&n&&e._UZ(0,"input",26),2&n){e.oxw();const t=e.MAs(1);e.Q6J("disabled",t.valid)}}function Be(n,c){if(1&n&&e._UZ(0,"input",27),2&n){e.oxw();const t=e.MAs(1);e.Q6J("disabled",t.valid)}}function Ve(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"section",7,8)(2,"h2"),e._uU(3,"Cr\xe9er ou mettre \xe0 jour une collection \xe0 partir de ces donn\xe9es"),e.qZA(),e.TgZ(4,"article")(5,"p"),e._uU(6,"Vous pouvez choisir l'option 'Cr\xe9er une nouvelle collection' ou s\xe9lectionner une collection existante pour la mettre \xe0 jour."),e.qZA(),e.TgZ(7,"select",9),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.idcollection=o)})("change",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.setIdCollection(o))}),e.TgZ(8,"option",10),e._uU(9,"Cr\xe9er une nouvelle collection"),e.qZA(),e.YNc(10,Ke,2,2,"option",11),e.qZA(),e.TgZ(11,"form",12),e.NdJ("submit",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.get.sendCloudNotices())}),e.TgZ(12,"label"),e._uU(13,"Titre *"),e.qZA(),e.TgZ(14,"input",13),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.get.scannedCollection.title=o)}),e.qZA(),e.TgZ(15,"label"),e._uU(16,"Alias *"),e.qZA(),e.TgZ(17,"input",14),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.get.scannedCollection.alias=o)}),e.qZA(),e.TgZ(18,"label"),e._uU(19,"Set *"),e.qZA(),e.TgZ(20,"input",15),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.get.scannedCollection.setname=o)}),e.qZA(),e.TgZ(21,"label"),e._uU(22,"Description"),e.qZA(),e.TgZ(23,"input",16),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.get.scannedCollection.description=o)}),e.qZA(),e.TgZ(24,"label"),e._uU(25,"Type *"),e.qZA(),e.TgZ(26,"select",17),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.get.scannedCollection.type=o)}),e.TgZ(27,"option",18),e._uU(28,"Images"),e.qZA(),e.TgZ(29,"option",19),e._uU(30,"Multim\xe9dia"),e.qZA()(),e.TgZ(31,"label"),e._uU(32,"Cr\xe9ateur"),e.qZA(),e.TgZ(33,"input",20),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.get.scannedCollection.creator=o)}),e.qZA(),e.TgZ(34,"label"),e._uU(35,"Fonds"),e.qZA(),e.TgZ(36,"input",21),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.get.scannedCollection.funds=o)}),e.qZA(),e.TgZ(37,"label"),e._uU(38),e.qZA(),e.TgZ(39,"label"),e._uU(40,"S\xe9ries"),e.qZA(),e.TgZ(41,"ul"),e.YNc(42,Re,2,1,"li",6),e.qZA(),e.TgZ(43,"div"),e.YNc(44,Xe,1,1,"input",22),e.YNc(45,Be,1,1,"input",23),e._UZ(46,"input",24),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(7),e.Q6J("ngModel",t.idcollection),e.xp6(3),e.Q6J("ngForOf",t.get.scannedCollections),e.xp6(4),e.Q6J("ngModel",t.get.scannedCollection.title),e.xp6(3),e.Q6J("ngModel",t.get.scannedCollection.alias),e.xp6(3),e.Q6J("ngModel",t.get.scannedCollection.setname),e.xp6(3),e.Q6J("ngModel",t.get.scannedCollection.description),e.xp6(3),e.Q6J("ngModel",t.get.scannedCollection.type),e.xp6(7),e.Q6J("ngModel",t.get.scannedCollection.creator),e.xp6(3),e.Q6J("ngModel",t.get.scannedCollection.funds),e.xp6(2),e.hij("Langue ",t.get.scannedCollection.lang,""),e.xp6(4),e.Q6J("ngForOf",t.get.scannedCollection.series),e.xp6(2),e.Q6J("ngIf",!t.get.scannedCollection.idcollections),e.xp6(1),e.Q6J("ngIf",t.get.scannedCollection.idcollections)}}function We(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"li",6),e.NdJ("click",function(){const l=e.CHM(t).index,s=e.oxw();return e.KtG(s.prefClick(l))}),e._uU(1),e.qZA()}if(2&n){const t=c.$implicit;e.xp6(1),e.hij(" ",t.title," ")}}function et(n,c){if(1&n&&(e.TgZ(0,"ul")(1,"li"),e._uU(2),e.qZA()()),2&n){const t=c.$implicit;e.xp6(2),e.hij(" ",t," ")}}function tt(n,c){if(1&n&&(e.TgZ(0,"article")(1,"h3"),e._uU(2),e.qZA(),e.TgZ(3,"ul")(4,"li"),e._uU(5),e.qZA(),e.TgZ(6,"li"),e._uU(7),e.qZA(),e.TgZ(8,"li"),e._uU(9),e.YNc(10,et,3,1,"ul",8),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(t.prefix.title),e.xp6(3),e.hij("Id : ",t.prefix.id,""),e.xp6(2),e.hij("Id : ",t.prefix.prefix,""),e.xp6(2),e.hij("",t.l.t.SCHEMA," : "),e.xp6(1),e.Q6J("ngForOf",t.prefix.schema)}}function nt(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"section")(1,"header")(2,"div")(3,"mat-icon",7),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.delete=!0)}),e._uU(4,"delete"),e.qZA(),e.TgZ(5,"mat-icon",7),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.showAdd())}),e._uU(6,"add"),e.qZA(),e.TgZ(7,"mat-icon",7),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.showUpdate())}),e._uU(8,"edit"),e.qZA()(),e.TgZ(9,"h2"),e._uU(10),e.qZA(),e.TgZ(11,"p"),e._uU(12),e.qZA()(),e.YNc(13,tt,11,5,"article",4),e.qZA()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("matTooltip",t.l.t.PREFIX_DEL),e.xp6(2),e.Q6J("matTooltip",t.l.t.PREFIX_EDIT),e.xp6(2),e.Q6J("matTooltip",t.l.t.PREFIX_EDIT),e.xp6(3),e.Oqu(t.l.t.PREFIXS),e.xp6(2),e.Oqu(t.l.t.PREFIXS_INFOS),e.xp6(1),e.Q6J("ngIf",t.prefix)}}function ot(n,c){if(1&n&&(e.TgZ(0,"ul")(1,"li"),e._uU(2),e.qZA()()),2&n){const t=c.$implicit;e.xp6(2),e.hij(" ",t," ")}}function it(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"article")(1,"h3"),e._uU(2),e.qZA(),e.TgZ(3,"ul")(4,"input",9),e.NdJ("[ngModel]",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.prefix.id)}),e.qZA(),e.TgZ(5,"li"),e._uU(6),e.qZA(),e.TgZ(7,"li"),e._uU(8),e.qZA(),e.TgZ(9,"li"),e._uU(10),e.YNc(11,ot,3,1,"ul",8),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(t.prefix.title),e.xp6(4),e.hij("Id : ",t.prefix.id,""),e.xp6(2),e.hij("Id : ",t.prefix.prefix,""),e.xp6(2),e.hij("",t.l.t.SCHEMA," : "),e.xp6(1),e.Q6J("ngForOf",t.prefix.schema)}}function ct(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"section")(1,"header")(2,"div")(3,"mat-icon",7),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.showUpdate())}),e._uU(4,"edit"),e.qZA()(),e.TgZ(5,"h2"),e._uU(6),e.qZA(),e.TgZ(7,"p"),e._uU(8),e.qZA()(),e.YNc(9,it,12,5,"article",4),e.qZA()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("matTooltip",t.l.t.PREFIX_EDIT),e.xp6(3),e.Oqu(t.l.t.PREFIXS),e.xp6(2),e.Oqu(t.l.t.PREFIXS_INFOS),e.xp6(1),e.Q6J("ngIf",t.prefix)}}function lt(n,c){if(1&n&&(e.TgZ(0,"ul")(1,"li"),e._uU(2),e.qZA()()),2&n){const t=c.$implicit;e.xp6(2),e.hij(" ",t," ")}}function st(n,c){if(1&n&&(e.TgZ(0,"article")(1,"h3"),e._uU(2),e.qZA(),e.TgZ(3,"ul")(4,"li"),e._uU(5),e.qZA(),e.TgZ(6,"li"),e._uU(7),e.qZA(),e.TgZ(8,"li"),e._uU(9),e.YNc(10,lt,3,1,"ul",8),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(t.prefix.title),e.xp6(3),e.hij("Id : ",t.prefix.id,""),e.xp6(2),e.hij("Id : ",t.prefix.prefix,""),e.xp6(2),e.hij("",t.l.t.SCHEMA," : "),e.xp6(1),e.Q6J("ngForOf",t.prefix.schema)}}function at(n,c){if(1&n&&(e.TgZ(0,"section")(1,"header")(2,"h2"),e._uU(3),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA()(),e.YNc(6,st,11,5,"article",4),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.Oqu(t.l.t.PREFIXS),e.xp6(2),e.Oqu(t.l.t.PREFIXS_INFOS),e.xp6(1),e.Q6J("ngIf",t.prefix)}}function rt(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"section",10)(1,"article")(2,"h2"),e._uU(3),e.qZA(),e.TgZ(4,"p")(5,"mat-icon",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.delete=!1)}),e._uU(6,"cancel"),e.qZA(),e.TgZ(7,"mat-icon",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.colServ.supprCollec(o.colServ.collection._id),e.KtG(o.delete=!1)}),e._uU(8,"check_circle"),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(3),e.Oqu(t.l.t.SUR),e.xp6(2),e.Q6J("matTooltip",t.l.t.ANNULE_DEL),e.xp6(2),e.Q6J("matTooltip",t.l.t.VALIDE_DEL)}}const _t=[{path:"",component:I,children:[{path:"",component:J},{path:"notices",component:de},{path:"notice/:id",component:q},{path:"collections",component:J},{path:"collection:id",component:N},{path:"scan",component:(()=>{class n{constructor(t,i){this.get=t,this.token=i,this.idcollection=-1}ngOnInit(){}scanFold(t){this.dir=t,this.get.scanFolder(t)}setIdCollection(t){-1!=t.target.value&&(this.get.collection.idcollections=t.target.value)}setCollection(){console.log(this.get.collection)}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(d),e.Y36(T.B))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-scan"]],decls:22,vars:4,consts:[[1,"screen","triple"],[1,"left-panel"],[3,"click"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],["class","selection",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"selection"],["f",""],[3,"ngModel","ngModelChange","change"],["value","-1"],[3,"value",4,"ngFor","ngForOf"],[3,"submit"],["name","title","required","","placeholder","Titre de la collection",3,"ngModel","ngModelChange"],["name","alias","required","","placeholder","Pas d'espaces ni de caract\xe8res sp\xe9ciaux",3,"ngModel","ngModelChange"],["name","setname","required","","placeholder","Pas d'espaces ni de caract\xe8res sp\xe9ciaux",3,"ngModel","ngModelChange"],["name","description","placeholder","Pas d'espaces ni de caract\xe8res sp\xe9ciaux",3,"ngModel","ngModelChange"],["name","mediatype",3,"ngModel","ngModelChange"],["value","images"],["value","multimedia"],["name","creator","required","","placeholder","Pas d'espaces ni de caract\xe8res sp\xe9ciaux",3,"ngModel","ngModelChange"],["name","funds","placeholder","Pas d'espaces ni de caract\xe8res sp\xe9ciaux",3,"ngModel","ngModelChange"],["type","submit","value","Cr\xe9er la collection",3,"disabled",4,"ngIf"],["type","submit","value","Mettre \xe0 jour la collection",3,"disabled",4,"ngIf"],["type","reset","value","Annuler"],[3,"value"],["type","submit","value","Cr\xe9er la collection",3,"disabled"],["type","submit","value","Mettre \xe0 jour la collection",3,"disabled"]],template:function(i,o){1&i&&(e.TgZ(0,"section",0)(1,"aside",1)(2,"header")(3,"h1"),e._uU(4,"Scanner des SETs de donn\xe9es"),e.qZA(),e.TgZ(5,"p"),e._uU(6,"Cliquez sur 'Scanner les dossiers' pour \xe9tablir la liste des SETs disponibles sur votre serveur de donn\xe9es."),e.qZA()(),e.TgZ(7,"button",2),e.NdJ("click",function(){return o.get.getFolders()}),e._uU(8,"Scanner les dossiers"),e.qZA(),e.TgZ(9,"ul"),e.YNc(10,Se,2,1,"li",3),e.qZA()(),e.TgZ(11,"section")(12,"header")(13,"h2"),e._uU(14),e.qZA(),e.TgZ(15,"p"),e._uU(16,"Ces donn\xe9es sont extraites des m\xe9dias et class\xe9es en pr\xe9fixes correspondant \xe0 des espaces de noms sur les m\xe9tadonn\xe9es saisies."),e.qZA(),e.TgZ(17,"p"),e._uU(18,"Les pr\xe9fixes organisent les donn\xe9es en espaces de noms pour leur exploitation et leur moissonnage."),e.qZA()(),e.YNc(19,Ge,4,1,"article",4),e.qZA(),e.TgZ(20,"aside"),e.YNc(21,Ve,47,13,"section",5),e.qZA()()),2&i&&(e.xp6(10),e.Q6J("ngForOf",o.get.scannedFolders),e.xp6(4),e.hij("Informations sur le SET choisi ","("+o.dir+")",""),e.xp6(5),e.Q6J("ngIf",o.get.scannedData),e.xp6(2),e.Q6J("ngIf",o.get.scannedData))},dependencies:[p.sg,p.O5,M.ib,M.yz,M.yK,M.u4,a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.Q7,a.On,a.F,p.Nd],styles:["aside[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{flex-flow:column nowrap}"]})}return n})()},{path:"prefixs",component:(()=>{class n{constructor(t,i,o,l){this.tokenServ=t,this.get=i,this.utils=o,this.l=l,this.delete=!1,this.add=!1,this.update=!1}prefClick(t){this.add=!1,this.update=!1,this.prefix=this.get.prefixs[t],console.log(this.prefix)}addPrefif(){this.prefix={id:"",prefix:"",schema:[],title:""}}updatePrefix(){this.prefix={id:"",prefix:"",schema:[],title:""}}showUpdate(){this.add=!1,this.update=!0}showAdd(){this.prefix=new _,this.add=!0,this.update=!1}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(T.B),e.Y36(d),e.Y36(Z.F),e.Y36(C.g))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-prefixs"]],decls:13,vars:7,consts:[[1,"screen","double"],[1,"left-panel"],["routerLink","/intranet/scan",3,"matTooltip"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],["class","pop-up",4,"ngIf"],[3,"click"],[3,"matTooltip","click"],[4,"ngFor","ngForOf"],[3,"[ngModel]"],[1,"pop-up"],[1,"grand",3,"matTooltip","click"]],template:function(i,o){1&i&&(e.TgZ(0,"section",0)(1,"aside",1)(2,"header")(3,"h1"),e._uU(4),e.qZA(),e.TgZ(5,"mat-icon",2),e._uU(6,"playlist_add"),e.qZA()(),e.TgZ(7,"ul"),e.YNc(8,We,2,1,"li",3),e.qZA()(),e.YNc(9,nt,14,6,"section",4),e.YNc(10,ct,10,4,"section",4),e.YNc(11,at,7,3,"section",4),e.qZA(),e.YNc(12,rt,9,3,"section",5)),2&i&&(e.xp6(4),e.Oqu(o.l.t.COLLECTION),e.xp6(1),e.Q6J("matTooltip",o.l.t.PREFIX_ADD),e.xp6(3),e.Q6J("ngForOf",o.get.prefixs),e.xp6(1),e.Q6J("ngIf",o.prefix&&!o.add&&!o.update),e.xp6(1),e.Q6J("ngIf",o.update),e.xp6(1),e.Q6J("ngIf",o.add),e.xp6(1),e.Q6J("ngIf",o.delete&&o.tokenServ.statut>=2))},dependencies:[p.sg,p.O5,f.rH,h.Hw,x.gM]})}return n})()},{path:"parameters",component:Fe},{path:"profil",component:ye},{path:"help",loadChildren:()=>r.e(296).then(r.bind(r,1296)).then(n=>n.AideModule)}]}];let pt=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[f.Bz.forChild(_t),f.Bz]})}return n})(),ut=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({providers:[Z.F,C.g,d,v],imports:[p.ez,pt,m.q,a.u5,a.UX]})}return n})()},3192:(P,O,r)=>{r.d(O,{F:()=>a});var p=r(2223);let a=(()=>{class m{constructor(){this.params={limite:20,langue:"fr_FR"},this.limite=30}typeOf(e){return Array.isArray(e)?"array":typeof e}tronqueTab(e,_){return e.slice(_.min,_.max)}getObj(e){return"object"!=typeof e}setFormat(e){switch(console.log(e),e){case"mp3":case"oga":case"ogg":case"aac":return"audio/"+e;case"wav":return"audio/x-wav";case"mp4":case"webm":case"ogv":case"vba":return"video/"+e;case"rtf":case"pdf":return"application/"+e;case"jpg":case"jpeg":case"gif":case"png":case"webp":return"image/"+e;default:return!1}}setNoticeBg(e,_){const u=_.dc?_.dc.format:"image";let g="";return g=!u||-1==u.indexOf("video")&&-1==u.indexOf("audio")?u&&-1!=u.indexOf("application")?"assets/img/pictos/picto_docs.png":`${e}${_.nema.set_name}/${_.media.file}`:_.dc.coverage?_.dc.coverage:"assets/img/pictos/picto_media.png",`url("${g}")`}setNoticeUrl(e,_){return`${e}${_.nema.set_name}/${_.media.file}`}play(e){if(e.currentTarget.previousElementSibling){let _=e.currentTarget.previousElementSibling;(-1!=_.tagName.indexOf("VIDEO")||-1!=_.tagName.indexOf("AUDIO"))&&_.play()}}pause(e){if(e.currentTarget.previousElementSibling){let _=e.currentTarget.previousElementSibling;(-1!=_.tagName.indexOf("VIDEO")||-1!=_.tagName.indexOf("AUDIO"))&&_.pause()}}static#e=this.\u0275fac=function(_){return new(_||m)};static#t=this.\u0275prov=p.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})()}}]);